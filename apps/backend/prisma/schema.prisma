generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
model FinanceSources {
  id               String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id          String              @db.Uuid
  description       String?
  type             finance_source_type
  name             String?             @db.VarChar(200)
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  finance_payments FinancePayments[]

  @@map("finance_sources")
}

model FinancePayments {
  id               String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id          String         @db.Uuid
  name             String         @db.VarChar(100)
  payment_type             payment_type
  amount           Decimal        @db.Decimal(12, 2)
  payment_circle_date DateTime? @db.Date
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  loop             Boolean        @default(false)
  status           payment_status
  financesource_id String         @db.Uuid
  finance_sources  FinanceSources @relation(fields: [financesource_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("finance_payments")
}

model InvestmentSources {
  id              String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id          String              @db.Uuid
  type            String
  name            String?                @db.VarChar(200)
  description       String?
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  investmentItems InvestmentItems[]      @relation("InvestmentSourceInvestmentItems")

  @@map("investment_sources")
}

model InvestmentItems {
  id                   String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id             String              @db.Uuid
  investment_source_id String            @db.Uuid
  asset_name           String           @db.VarChar(75)
  term                 String?
  invested_amount      Decimal           @db.Decimal(18, 2)
  entry_date           DateTime          @db.Date
  exit_date            DateTime?         @db.Date
  result               String?
  result_amount        Decimal?          @db.Decimal(18, 2)
  status               String?
  investmentSource     InvestmentSources @relation("InvestmentSourceInvestmentItems", fields: [investment_source_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("investment_items")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model sources {
  id                String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  source_name       String              @db.VarChar(200)
  description       String?
  date              DateTime?           @db.Date
  type              String              @db.VarChar(24)
  user_id           String              @db.Uuid
  users             users               @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model users {
  username            String    @unique @db.VarChar(50)
  email               String    @unique @db.VarChar(100)
  monthly_circle_date String?   @db.VarChar(10)
  password            String
  id                  String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  sources             sources[]
}

enum finance_source_type {
  outcome
  income
}

enum investment_result {
  profit
  loss
  none
}

enum investment_source_type {
  crypto
  forex
  investment
}

enum investment_status {
  open
  closed
}

enum investment_term {
  short
  middle
  long
}

enum payment_status {
  paid
  coming
}

enum payment_type {
  credit
  cash
}

enum source_type {
  finance
  investment
}
